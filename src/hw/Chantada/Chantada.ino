/*
 * Proxecto Puding
 * Copyright (C) 2011 Alejo Pacín <info@proxecto-puding.org>
 * 
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.

 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */

void setup() {
  
  // Set MIDI baud rate:
  Serial.begin(31250);
}

void loop() {

  // Play "Muiñeira de Chantada".
  playChantada();
  delay(1000);
}

void playChantada() {

  playNote(192 , 79);
  playNote(720 , 72);
  playNote(144 , 74);
  playNote(144 , 75);
  playNote(144 , 77);
  playNote(960 , 79);
  playNote(192 , 79);
  playNote(192 , 79);
  playNote(192 , 77);
  playNote(192 , 79);
  playNote(384 , 80);
  playNote(192 , 79);
  playNote(576 , 79);
  playNote(576 , 74);
  playNote(576 , 74);
  playNote(192 , 75);
  playNote(192 , 77);
  playNote(192 , 79);
  playNote(864 , 80);
  playNote(96  , 79);
  playNote(192 , 77);
  playNote(192 , 79);
  playNote(192 , 80);
  playNote(192 , 79);
  playNote(192 , 77);
  playNote(192 , 75);
  playNote(192 , 74);
  playNote(384 , 75);
  playNote(192 , 74);
  playNote(384 , 72);
  playNote(192 , 79);
  playNote(720 , 72);
  playNote(144 , 74);
  playNote(144 , 75);
  playNote(144 , 77);
  playNote(960 , 79);
  playNote(192 , 79);
  playNote(192 , 79);
  playNote(192 , 77);
  playNote(192 , 79);
  playNote(576 , 84);
  playNote(576 , 82);
  playNote(576 , 80);
  playNote(192 , 80);
  playNote(192 , 82);
  playNote(192 , 84);
  playNote(384 , 74);
  playNote(192 , 84);
  playNote(576 , 84);
  playNote(576 , 79);
  playNote(192 , 79);
  playNote(192 , 80);
  playNote(192 , 79);
  playNote(192 , 77);
  playNote(192 , 75);
  playNote(192 , 74);
  playNote(960 , 72);
  playNote(192 , 79);
  playNote(720 , 72);
  playNote(144 , 74);
  playNote(144 , 75);
  playNote(144 , 77);
  playNote(960 , 79);
  playNote(192 , 79);
  playNote(192 , 79);
  playNote(192 , 77);
  playNote(192 , 79);
  playNote(384 , 80);
  playNote(192 , 79);
  playNote(576 , 79);
  playNote(576 , 74);
  playNote(576 , 74);
  playNote(192 , 75);
  playNote(192 , 77);
  playNote(192 , 79);
  playNote(864 , 80);
  playNote(96  , 79);
  playNote(192 , 77);
  playNote(192 , 79);
  playNote(192 , 80);
  playNote(192 , 79);
  playNote(192 , 77);
  playNote(192 , 75);
  playNote(192 , 74);
  playNote(384 , 75);
  playNote(192 , 74);
  playNote(384 , 72);
  playNote(192 , 79);
  playNote(720 , 72);
  playNote(144 , 74);
  playNote(144 , 75);
  playNote(144 , 77);
  playNote(960 , 79);
  playNote(192 , 79);
  playNote(192 , 79);
  playNote(192 , 77);
  playNote(192 , 79);
  playNote(576 , 84);
  playNote(576 , 82);
  playNote(576 , 80);
  playNote(192 , 80);
  playNote(192 , 82);
  playNote(192 , 84);
  playNote(384 , 74);
  playNote(192 , 84);
  playNote(576 , 84);
  playNote(576 , 79);
  playNote(192 , 79);
  playNote(192 , 80);
  playNote(192 , 79);
  playNote(192 , 77);
  playNote(192 , 75);
  playNote(192 , 74);
  playNote(576 , 72);
  playNote(384 , 84);
  playNote(192 , 83);
  playNote(384 , 79);
  playNote(192 , 81);
  playNote(384 , 83);
  playNote(192 , 79);
  playNote(576 , 81);
  playNote(384 , 79);
  playNote(192 , 77);
  playNote(384 , 74);
  playNote(192 , 76);
  playNote(384 , 77);
  playNote(192 , 79);
  playNote(128 , 76);
  playNote(128 , 77);
  playNote(128 , 76);
  playNote(192 , 72);
  playNote(384 , 84);
  playNote(192 , 83);
  playNote(384 , 79);
  playNote(192 , 81);
  playNote(384 , 83);
  playNote(192 , 79);
  playNote(576 , 81);
  playNote(384 , 79);
  playNote(192 , 77);
  playNote(384 , 74);
  playNote(192 , 76);
  playNote(384 , 77);
  playNote(192 , 79);
  playNote(576 , 72);
  playNote(384 , 84);
  playNote(192 , 83);
  playNote(384 , 79);
  playNote(192 , 81);
  playNote(384 , 83);
  playNote(192 , 79);
  playNote(576 , 81);
  playNote(384 , 79);
  playNote(192 , 77);
  playNote(384 , 74);
  playNote(192 , 76);
  playNote(384 , 77);
  playNote(192 , 79);
  playNote(128 , 76);
  playNote(128 , 77);
  playNote(128 , 76);
  playNote(192 , 72);
  playNote(384 , 84);
  playNote(192 , 83);
  playNote(384 , 79);
  playNote(192 , 81);
  playNote(384 , 83);
  playNote(192 , 79);
  playNote(576 , 81);
  playNote(384 , 79);
  playNote(192 , 77);
  playNote(384 , 74);
  playNote(192 , 76);
  playNote(384 , 77);
  playNote(192 , 79);
  playNote(768 , 72);
  playNote(192 , 84);
  playNote(192 , 79);
  playNote(384 , 83);
  playNote(384 , 81);
  playNote(192 , 76);
  playNote(192 , 72);
  playNote(128 , 81);
  playNote(128 , 83);
  playNote(128 , 81);
  playNote(384 , 79);
  playNote(192 , 76);
  playNote(192 , 72);
  playNote(128 , 79);
  playNote(128 , 81);
  playNote(128 , 79);
  playNote(384 , 77);
  playNote(192 , 74);
  playNote(192 , 71);
  playNote(128 , 81);
  playNote(128 , 83);
  playNote(128 , 81);
  playNote(384 , 79);
  playNote(192 , 84);
  playNote(192 , 79);
  playNote(384 , 83);
  playNote(384 , 81);
  playNote(192 , 76);
  playNote(192 , 72);
  playNote(128 , 81);
  playNote(128 , 83);
  playNote(128 , 81);
  playNote(384 , 79);
  playNote(192 , 76);
  playNote(192 , 72);
  playNote(128 , 79);
  playNote(128 , 81);
  playNote(128 , 79);
  playNote(384 , 77);
  playNote(192 , 74);
  playNote(192 , 76);
  playNote(768 , 72);
  playNote(192 , 84);
  playNote(192 , 79);
  playNote(384 , 83);
  playNote(384 , 81);
  playNote(192 , 76);
  playNote(192 , 72);
  playNote(128 , 81);
  playNote(128 , 83);
  playNote(128 , 81);
  playNote(384 , 79);
  playNote(192 , 76);
  playNote(192 , 72);
  playNote(128 , 79);
  playNote(128 , 81);
  playNote(128 , 79);
  playNote(384 , 77);
  playNote(192 , 74);
  playNote(192 , 71);
  playNote(128 , 81);
  playNote(128 , 83);
  playNote(128 , 81);
  playNote(384 , 79);
  playNote(192 , 84);
  playNote(192 , 79);
  playNote(384 , 83);
  playNote(384 , 81);
  playNote(192 , 76);
  playNote(192 , 72);
  playNote(128 , 81);
  playNote(128 , 83);
  playNote(128 , 81);
  playNote(384 , 79);
  playNote(192 , 76);
  playNote(192 , 72);
  playNote(128 , 79);
  playNote(128 , 81);
  playNote(128 , 79);
  playNote(384 , 77);
  playNote(192 , 74);
  playNote(192 , 76);
  playNote(960 , 72);
  playNote(192 , 79);
  playNote(192 , 72);
}

void playNote(int duration, int note) {

  //Note on channel 1 (0x90), some note value (note), middle velocity (0x45):
    noteOn(0x90, note, 0x45);
    delay(duration);
    //Note on channel 1 (0x90), some note value (note), silent velocity (0x00):
    noteOn(0x90, note, 0x00);
}

void noteOn(int cmd, int pitch, int velocity) {
  Serial.write(cmd);
  Serial.write(pitch);
  Serial.write(velocity);
}
